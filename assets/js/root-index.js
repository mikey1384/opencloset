// Generated by CoffeeScript 1.6.2
(function() {
  $(function() {
    $('#clothe-id').focus();
    $('#btn-clothe-search').click(function(e) {
      return $('#clothe-search-form').trigger('submit');
    });
    return $('#clothe-search-form').submit(function(e) {
      var clothe_id;

      e.preventDefault();
      $('#clothe-search-form p.text-error').text('');
      clothe_id = $('#clothe-id').val();
      $('#clothe-id').val('').focus();
      if (!clothe_id) {
        return;
      }
      return $.ajax("/clothes/" + clothe_id + ".json", {
        type: 'GET',
        dataType: 'json',
        success: function(data, textStatus, jqXHR) {
          var $html, compiled, html;

          if (/대여가능/.test(data.status)) {
            compiled = _.template($('#tpl-rent-available').html());
            html = $(compiled(data));
            $('#clothes-list').append(html);
            return;
          }
          compiled = _.template($('#tpl-li').html());
          $html = $(compiled(data));
          if (/연체중/.test(data.status)) {
            $html.find('.order-status').addClass('label-important');
          }
          if (data.overdue) {
            compiled = _.template($('#tpl-overdue-paragraph').html());
            html = compiled(data);
            $html.append(html);
          }
          return $('#clothes-list').append($html);
        },
        error: function(jqXHR, textStatus, errorThrown) {
          return $('#clothe-search-form p.text-error').text(jqXHR.responseJSON.error);
        },
        complete: function(jqXHR, textStatus) {}
      });
    });
  });

}).call(this);
