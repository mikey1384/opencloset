- use utf8;
- my $_id = 'home';
- layout 'default', page_id => $_id;
- title meta_text($_id);

.search
  %form#clothes-search-form
    .input-group
      %input#clothes-id.form-control{ :type => 'text', :placeholder => '품번' }
      %span.input-group-btn
        %button#btn-clothes-search.btn.btn-sm.btn-default{ :type => 'button' }
          %i.icon-search.bigger-110 검색
      %span.input-group-btn
        %button#btn-clear.btn.btn.btn-sm.btn-default{:type => 'button'}
          %i.icon-eraser.bigger-110 지우기

.space-8

%div
  %span
    %a#clothes-status-all= sprintf "전체보기 (%d)", $status->{all};
  %span= '|'
  %span
    %a#clothes-status-1= sprintf " 대여가능 (%d)", $status->{1};
  %span= '|'
  %span
    %a#clothes-status-2= sprintf " 대여중 (%d)", $status->{2};
  %span= '|'
  %span
    %a#clothes-status-3= sprintf " 대여불가 (%d)", $status->{3};
  %span= '|'
  %span
    %a#clothes-status-4= sprintf " 예약 (%d)", $status->{4};
  %span= '|'
  %span
    %a#clothes-status-5= sprintf " 세탁 (%d)", $status->{5};
  %span= '|'
  %span
    %a#clothes-status-6= sprintf " 수선 (%d)", $status->{6};
  %span= '|'
  %span
    %a#clothes-status-7= sprintf " 분실 (%d)", $status->{7};
  %span= '|'
  %span
    %a#clothes-status-8= sprintf " 폐기 (%d)", $status->{8};
  %span= '|'
  %span
    %a#clothes-status-9= sprintf " 반납 (%d)", $status->{9};
  %span= '|'
  %span
    %a#clothes-status-11= sprintf " 반납배송중 (%d)", $status->{11};

.space-4

#clothes-table
  %table.table.table-striped.table-bordered.table-hover
    %thead
      %tr
        %th.center
          %label
            %input#input-check-all.ace{ :type => 'checkbox' }
            %span.lbl
        %th 옷
        %th 상태
        %th 묶음
        %th 기타
    %tbody
  #action-buttons.btn-group
    %button.btn.btn-primary.dropdown-toggle{ 'data-toggle' => 'dropdown' }
      선택한 항목을 변경할 상태를 선택하세요.
      %i.icon-angle-down.icon-on-right
    %ul.dropdown-menu
      - for my $status (qw/ 세탁 대여가능 /) {
        %li
          %a{ :href => "#" }= $status
      - }
      %li.divider
      - for my $status (qw/ 대여불가 예약 수선 분실 폐기 /) {
        %li
          %a{ :href => "#" }= $status
      - }

:plain
  <script id="tpl-row-checkbox-clothes-with-order" type="text/html">
    <tr class="clothes-status clothes-status-<%= statusCode %>" data-order-id="<%= order.id %>">
      <td class="center">
        <label>
          <input class="ace" type="checkbox" disabled>
          <span class="lbl"></span>
        </label>
      </td>
      <td> <a href="/clothes/<%= code %>"> <%= code %> </a> </td> <!-- 옷 -->
      <td>
        <span class="order-status label">
          <%= status %>
          <span class="late-fee"><%= order.late_fee ? order.late_fee + '원' : '' %></span>
        </span>
      </td> <!-- 상태 -->
      <td>
        <% _.each(order.clothes, function(c) { c = c.replace(/^0/, ''); %> <a href="/clothes/<%= c %>"><%= c %></a><% }); %>
      </td> <!-- 묶음 -->
      <td>
        <a href="/order/<%= order.id %>"><span class="label label-info arrowed-right arrowed-in">
          <strong>주문서</strong>
          <time class="js-relative-date" datetime="<%= order.rental_date.raw %>" title="<%= order.rental_date.ymd %>"><%= order.rental_date.md %></time>
          ~
          <time class="js-relative-date" datetime="<%= order.target_date.raw %>" title="<%= order.target_date.ymd %>"><%= order.target_date.md %></time>
        </span></a>
      </td> <!-- 기타 -->
    </tr>
  </script>

:plain
  <script id="tpl-row-checkbox-clothes" type="text/html">
    <tr class="row-checkbox clothes-status clothes-status-<%= statusCode %>" data-clothes-code="<%= code %>">
      <td class="center">
        <label>
          <input class="ace" type="checkbox" <%= status == '대여중' ? 'disabled' : '' %> data-clothes-code="<%= code %>">
          <span class="lbl"></span>
        </label>
      </td>
      <td> <a href="/clothes/<%= code %>"> <%= code %> </a> </td> <!-- 옷 -->
      <td> <span class="order-status label"><%= status %></span> </td> <!-- 상태 -->
      <td> </td> <!-- 묶음 -->
      <td> </td> <!-- 기타 -->
    </tr>
  </script>

:plain
  <script id="tpl-overdue-paragraph" type="text/html">
    <span>
      연체료 <%= OpenCloset.commify(order.late_fee) %>원 = <%= OpenCloset.commify(order.clothes_price) %>원 x <%= order.overdue %>일 x 20%
    </span>
  </script>
