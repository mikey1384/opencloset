- use utf8;
- my $_id = 'user';
- layout 'default',
-   page_id     => $_id,
-   breadcrumbs => [ { text => meta_text($_id) } ]
-   ;
- title meta_text($_id);

#user-list-table.dataTables_wrapper
  %table.table.table-striped.table-bordered.table-hover
    %thead
      %tr
        %th.center #
        %th 이름
        %th 성별
        %th 태어난 해
        %th 이메일
        %th 전화번호
        %th 가입일
        %th 최근 방문일
    %tbody
      - while ( my $user = $user_list->next ) {
        %tr
          %td.center
            %a{ :href => "#{url_for('/user/' . $user->id)}" }= $user->id
          %td
            %a{ :href => "#{url_for('/user/' . $user->id)}" }= $user->name
          %td
            = $user->user_info->gender ? ( $user->user_info->gender eq 'male' ? '남' : '여' ) : q{}
          %td
            = $user->user_info->birth || q{}
          %td
            = $user->email
          %td
            = $user->user_info->phone
          %td
            = $user->create_date ? $user->create_date->strftime('%Y-%m-%d %H:%M:%S') : q{}
          %td
            = $user->update_date ? $user->update_date->strftime('%Y-%m-%d %H:%M:%S') : q{}
      - }

  .row
    .col-xs-6
      .dataTables_info= sprintf('Showing %d to %d of %d entries', $pageset->first, $pageset->last, $pageset->total_entries)
    .col-xs-6
      .dataTables_paginate.paging_simple_numbers
        %ul.pagination
          /
          / first page
          /
          - if ( $pageset->current_page != $pageset->first_page ) {
            %li.paginate_button.previous
              %a{ :href => '#{url_with->query([p => $pageset->first_page])}' }
                %i.icon-fast-backward
          - }
          - else {
            %li.paginate_button.previous.disabled
              %a
                %i.icon-fast-backward
          - }

          /
          / previous page
          /
          - if ($pageset->previous_page) {
            %li.paginate_button.previous
              %a{ :href => '#{url_with->query([p => $pageset->previous_page])}' }
                %i.icon-backward
          - }
          - else {
            %li.paginate_button.previous.disabled
              %a
                %i.icon-backward
          - }

          /
          / pages
          /
          - for my $p (@{ $pageset->pages_in_set }) {
          -   if ($p == $pageset->current_page) {
            %li.paginate_button.active
              %a{ :href => '#' }= $p
          -   }
          -   else {
            %li.paginate_button
              %a{ :href => '#{url_with->query([p => $p])}' }= $p
          -   }
          - }

          /
          / next page
          /
          - if ($pageset->next_page) {
            %li.paginate_button.next
              %a{ :href => '#{url_with->query([p => $pageset->next_page])} '}
                %i.icon-forward
          - }
          - else {
            %li.paginate_button.next.disabled
              %a
                %i.icon-forward
          - }

          /
          / last page
          /
          - if ( $pageset->current_page != $pageset->last_page ) {
            %li.paginate_button.next
              %a{ :href => '#{url_with->query([p => $pageset->last_page])}' }
                %i.icon-fast-forward
          - }
          - else {
            %li.paginate_button.next.disabled
              %a
                %i.icon-fast-forward
          - }
